# Magabot Configuration
# Platform-specific configs: configs/platforms/<name>/config.example.yaml
# LLM config: configs/llm/config.example.yaml

# Security
security:
  # Encryption key (32 bytes, base64) - generate with: ./magabot -genkey
  encryption_key: ""
  
  # Allowed users per platform (empty = allow all for setup)
  allowed_users:
    telegram: []
    # telegram: ["287676843"]
    whatsapp: []
    slack: []
  
  rate_limit:
    messages_per_minute: 30
    commands_per_minute: 10

# Platforms
platforms:
  telegram:
    enabled: true
    bot_token: ""  # From @BotFather
    
  whatsapp:
    enabled: false
    
  slack:
    enabled: false
    bot_token: ""   # xoxb-...
    app_token: ""   # xapp-...
    signing_secret: ""
    
  webhook:
    enabled: false
    port: 8080
    path: "/webhook"
    bind: "127.0.0.1"
    auth_method: "bearer"  # none, bearer, basic, hmac
    bearer_token: ""
    hmac_secret: ""
    allowed_ips: []

# Paths - Directory structure
paths:
  data_dir: ~/data/magabot           # Base data directory
  logs_dir: ~/data/magabot/logs      # Log files
  memory_dir: ~/data/magabot/memory  # RAG/memory storage
  cache_dir: ~/data/magabot/cache    # Temporary cache
  exports_dir: ~/data/magabot/exports    # User exports
  downloads_dir: ~/data/magabot/downloads # Bot downloads

# Skills - Plugin system
skills:
  dir: ~/code/magabot-skills  # Skills directory (can be git repo)
  auto_reload: true           # Watch for changes and reload

# Storage
storage:
  database: ""  # Default: ~/data/magabot/db/magabot.db
  history_retention: 90  # days, 0 = forever
  backup:
    enabled: true
    path: ""  # Default: ~/data/magabot/backups
    keep_count: 10
    auto_interval: 24  # hours, 0 = disabled

# Logging
logging:
  level: "info"  # debug, info, warn, error
  file: "data/magabot.log"
  redact_messages: true

# LLM Configuration
llm:
  main: "anthropic"
  
  system_prompt: |
    Kamu adalah asisten AI yang helpful dan ramah.
    Jawab dengan singkat dan jelas dalam bahasa Indonesia.
  
  max_input_length: 10000
  timeout: 60
  rate_limit: 10  # requests per minute per user
  
  # Anthropic (Claude)
  # Two modes:
  #   mode: "api" (default) — calls Anthropic API directly
  #   mode: "cli"           — uses `claude` CLI command (Pro/Max subscription, no key needed)
  #
  # API mode auth (choose one):
  #   api_key     → Anthropic API key, or env ANTHROPIC_API_KEY
  #   auth_token  → Claude OAuth token, or env ANTHROPIC_AUTH_TOKEN (Pro/Max)
  #
  # CLI mode: requires `claude` installed and authenticated (claude login)
  anthropic:
    enabled: true
    mode: "api"      # "api" or "cli"
    api_key: ""      # API mode: Anthropic API key
    # auth_token: "" # API mode: Claude OAuth token (Pro/Max)
    # cli_path: ""   # CLI mode: path to claude binary (default: "claude")
    model: "claude-sonnet-4-20250514"
    max_tokens: 4096
    temperature: 0.7
  
  # OpenAI (GPT)
  openai:
    enabled: false
    api_key: ""  # or env: OPENAI_API_KEY
    model: "gpt-4o"
    max_tokens: 4096
    temperature: 0.7
  
  # Google Gemini
  gemini:
    enabled: false
    api_key: ""  # or env: GOOGLE_API_KEY
    model: "gemini-1.5-pro"
    max_tokens: 4096
    temperature: 0.7
  
  # Zhipu GLM (ChatGLM)
  glm:
    enabled: false
    api_key: ""  # or env: GLM_API_KEY
    model: "glm-4"
    max_tokens: 4096
    temperature: 0.7
    base_url: "https://open.bigmodel.cn/api/paas/v4/chat/completions"

# Tools Configuration (100% FREE - no API keys required!)
tools:
  # Web Search
  # Primary: Brave API (if key provided)
  # Fallback: DuckDuckGo scraping (no key needed)
  search:
    enabled: true
    api_key: ""  # Optional: BRAVE_API_KEY for better results
  
  # Maps - Nominatim (OpenStreetMap) - 100% free
  maps:
    enabled: true
    # No API key needed!
  
  # Weather - wttr.in - 100% free
  weather:
    enabled: true
    # No API key needed!
  
  # Web Scraper - Colly (lightweight browser alternative)
  scraper:
    enabled: true
    # Scrape any website, extract text, links, images
    # No API key needed!
